import React, {
  createContext,
  Dispatch,
  FC,
  useContext,
  useState,
} from 'react';
import { SharedValue, useSharedValue } from 'react-native-reanimated';
import { IEvent } from '../services/types';

interface EventProvider {
  setEvents: Dispatch<IEvent[]>;
  events: IEvent[];
  setIsOpenCreateEventModal: Dispatch<boolean>;
  isOpenCreateEventModal: boolean;
  setIsOpenCreatePlace: Dispatch<boolean>;
  isOpenCreatePlace: boolean;
  formValues: IEvent;
  handleForm: (key: keyof IEvent, value: unknown) => void;
  progress: SharedValue<number>;
}

const EventMoked = [
  {
    id: 6,
    title: 'Free Your Funk : QUANTIC (3h dj set), Theo Terev, Soulist',
    desc: `Vendredi 2 Septembre, pour notre 20√®me rentr√©e, nous aurons le plaisir de recevoir Quantic aussi bien connu pour ses djs sets en solo qu‚Äô √† la t√™te des groupes Ondatropica, the Quantic Soul Orchestra ou encore Quantic & his Combo Barbaro pour un dj set de 3 heures. A ses c√¥t√©s, Theo Terev qui fait partie du collectif la Mamie's et Soulist.
  Une premi√®re date qui devrait parcourir un spectre musical √† 360¬∞, latin, soul, house, disco, afrobeat ou funk.`,
    coverUri:
      'https://scontent-mrs2-2.xx.fbcdn.net/v/t39.30808-6/295548507_7765180036886633_6447278391200178878_n.jpg?_nc_cat=107&ccb=1-7&_nc_sid=340051&_nc_ohc=kiwt-zmPW2QAX8qWiDS&_nc_ht=scontent-mrs2-2.xx&oh=00_AT-r8KmvmSmyK7ThmgGhmHnXuSf4FUAIZpjieXO4VjvONA&oe=62F7D9FC',
    photos: [],
    followers: [],
    endAt: new Date(),
    beginAt: new Date(),
    distance: 10,
    price: 0,
    userId: ['Free Your Funk', 'Quantic Music'],
    place: 'La Bellevilloise',
    type: [],
    formatted_address: '19 rue Boyer, Paris',
    place_id: '987ds89vfds987adc9',
    geocode: { lat: 48.867945, lng: 2.392217 },
  },
  {
    id: 7,
    title: 'Entr√©e Plat Disco - Food & Musique Festival',
    desc: `3 ans de vie √ßa se f√™te !!! Cadence, l'√©lectron libre qui gravite entre gastronomie, oenologie et programmation musicale s'allie avec le Barboteur pour proposer 3 jours de f√™te au bord de l'eau autour de la cuisine et de la musique ! üéâ

  ‚≠êÔ∏èQUOI ‚≠êÔ∏è
  Le vendredi 26, samedi 27 et dimanche 28 ao√ªt au Canal Barboteur sur le spot du Mill√©naire le long du canal Saint-Denis, se succ√®deront aux platines et aux fourneaux, sur le quai et sur le bateau, un plateau food et musique local et de saison !
  
  üç≥ FOOD üç≥
  - Cadence Paris -
  Resto audio install√© avenue Parmentier dans le 11√®me depuis trois ans. Cadence, c'est une cuisine du march√© fra√Æche et r√©confortante, des vins tri√©s sur le volet, et le tout en musique, en cadence ! Chaque samedi, les fameuses soir√©es Entr√©e Plat Disco accueillent derri√®re les platines des artistes et collectifs de la sc√®ne parisienne et europ√©enne.
  www.cadencecadence.fr/
  www.instagram.com/cadence.paris/
  
  - Tr√¢m Tr√¢m -
  Cadence invite la cheffe Priscilla Tr√¢m pour un takeover en plein air des cuisines du Baboteur.
  Surprenante et cr√©ative, la cuisine de Priscilla aka Tr√¢m Tr√¢m est un savant √©quilibre entre sa passion pour la gastronomie traditionnelle fran√ßaise et la mise √† l'honneur de la cuisine vietnamienne de ses origines. Vous l'aviez peut-√™tre crois√©e lors de ses pr√©c√©dentes r√©sidences au Yard, BMK, la Parade, ou encore Bonne Aventure. C'est bient√¥t au Barboteur avec nous qu'elle continue sa tourn√©e des potes pour vous envoyer du bon, du beau et du kiff dans l'assiette.
  www.instagram.com/tramtramskitchen/
  
  - Mekla -
  Cuisiner le vivant.
  https://www.instagram.com/mekla.paris/
  
  - Pantobaguette -
  Le bar restaurant bistronomique. Comptoir musical et culinaire engag√©.
  https://www.pantobaguette.fr/
  https://www.instagram.com/pantobaguette/
  
  üçá VINO üç∑
  - P√©pin -
  P√©pin est un projet de n√©goce d√©tonnant lanc√© par le Domaine Achil√©e en Alsace.
  Leur but: rendre le vin naturel accessible √† tous gr√¢ce √† un travail de pr√©cision.
  Chaque cuv√©e est issue de vignes cultiv√©es en Bio un peu partout en France, vendang√©es √† la main, vinifi√©es sans intrants !
  Nous vous proposerons plusieurs r√©fs √† la tireuse tout le weekend !
  www.instagram.com/pepin.vin/
  
  üìÄ MUSIQUE üìÄ
  - Antipasti (Paris, Cadence, Karagi)
  https://soundcloud.com/antipastiii
  - Belec (Paris, Association Fatale, BISOU, Bruits de la Passion, Dynam'hit)
  https://soundcloud.com/be_lec
  - Bigwax Records (Paris, Bigwax Records)
  https://www.instagram.com/bigwaxrecords/
  - Cadence Deejays (Paris, Cadence)
  https://soundcloud.com/decadence-paris
  - Crazy B (Paris, Birdy Nam Nam, Alliance Ethnik, Rapsonic, DMC France et World Champion)
  https://soundcloud.com/crazyb1
  - Divagation Soundsystem : Maybe Tonight + Lorem Ipsum (Paris, Maybe Tonight, Lorem Ipsum)
  https://soundcloud.com/maybe-tonight
  https://soundcloud.com/lorem-ipsum-yo
  - Frinda Di Lanco (Berlin, Avec Plaisir Records, Ciao Amore Baci)
  https://soundcloud.com/frinda_di_lanco
  - Georgie And the Vallones (Paris, Radio France)
  https://georgiethevallones.bandcamp.com/
  - Mercredi Records (Paris, Mercredi Records)
  https://soundcloud.com/mercredirecords
  - Mademoiselle Linda (Paris, Peacefull Diggin)
  https://soundcloud.com/mlle_elle
  - Morfine / live (Paris, nouvel album 'Blinding Nights' out 14/04/22)
  https://soundcloud.com/themorfine
  - Music For Tourist (Paris, Rinse France)
  https://soundcloud.com/chris-martinon
  - Richard Fribert (Copenhaguen, Quartier Groove, No Standards)
  https://soundcloud.com/richardfribert
  
  
  ‚ú® ANIMATIONS ‚ú®
  - Durant les trois jours du festival, retrouvez un espace ludique avec des grands jeux en bois, p√©tanque, m√¥lky, ping pong et plein d'autres surprises
  - Ateliers participatifs autour de la pratique artistique (TBA)
  
  
  _____ Infos Pratiques _____
  üö§ LE CANAL BARBOTEUR üö§
  Spot du Mill√©naire
  21 Quai du Lot, 75019
  Vendredi 26 ao√ªt (18h - 00h)
  Samedi 27 ao√ªt (14h - 00h)
  Dimanche 28 ao√ªt (12h - 22h)
  FREE ENTRANCE
  OPEN AIR
  
  UN √âV√àNEMENT PR√âSENT√â PAR
  Cadence Paris
  https://cadencecadence.fr/
  https://www.instagram.com/cadence.paris/
  
  Cet √©v√©nement est soutenu par l'√ât√© culturel de la Direction R√©gionale de Affaires Culturelles d‚Äô√éle-de-France, et le festival Formes Olympiques de la mairie de Paris`,
    coverUri:
      'https://scontent-mrs2-2.xx.fbcdn.net/v/t39.30808-6/295045300_1971029919769490_1517562099791360665_n.jpg?_nc_cat=110&ccb=1-7&_nc_sid=340051&_nc_ohc=WKaAtKpkiBkAX_6FIKQ&_nc_ht=scontent-mrs2-2.xx&oh=00_AT9NtUtIaQrJhDLCbxigH7YUukzvo5n5aYIo4zwk9A4K3A&oe=62F852E6',
    photos: [],
    followers: [],
    endAt: new Date(),
    beginAt: new Date(),
    distance: 10,
    price: 0,
    userId: ['Cadence Paris', 'Tr√¢m Tr√¢m'],
    place: 'Quai du Lot, 75019 Paris, France',
    type: [],
    formatted_address: 'Quai du Lot, 75019 Paris, France',
    place_id: '987ds89vfds987adc9',
    geocode: { lat: 48.898154, lng: 2.383456 },
  },
  {
    id: 8,

    title: 'La Clairi√®re : BOB SINCLAR ALL NIGHT LONG',
    desc: `üå± La Clairi√®re & Tree Of Life pr√©sentent üå±
    üå≥ La Clairi√®re : BOB SINCLAR üå≥
    22h00 - 05h00
    Open up your heart, what do you feel?
    Nous sommes heureux d‚Äôaccueillir Bob Sinclar pour son premier ALL NIGHT LONG √† la Clairi√®re ! 5h de house en approche, on est d√©j√† bouillants ! Bob Sinclar is (back) in the house üî•
    Inutile de vous pr√©senter Boby, √† la fois pionnier de la French Touch, producteur de tubes et entertainer de g√©nie.
    La soir√©e s‚Äôannonce d'ores et d√©j√† historique, magique & sold out !
    Aucune excuse, chope ton billet rapidos ici :
    üé´ Billetterie : https://bit.ly/3vjKXa4
    üçæ Tables : https://bit.ly/3z63LMy
    üå≥ ACC√àS üå≥
    La Clairi√®re - Carrefour de Longchamp -75116 - Paris
    üöå Bus 244 (jusqu'√† 0h30) - Arr√™t : Carrefour de Longchamp
    üöñ FREENOW vous propose 2x -50% de r√©duction* pour venir mais aussi pour rentrer avec le code CLAIRIERE2022
    Lien vers l'app :
    https://bit.ly/3jlBpWR
    
    üîû √âtablissement interdit aux mineurs (contr√¥le d'identit√© avec pi√®ce d'identit√© valide et non pr√©sent√©e sur t√©l√©phone) `,
    coverUri:
      'https://scontent-mrs2-2.xx.fbcdn.net/v/t39.30808-6/296016910_2082693391929245_7098708941005040481_n.jpg?_nc_cat=106&ccb=1-7&_nc_sid=340051&_nc_ohc=EH_JKXDxmNoAX_RxGYJ&_nc_ht=scontent-mrs2-2.xx&oh=00_AT9YwF1yQ7ko0e0xrCD7u-1hlnpyIlJ_qYWu3oFCnxZ2Ew&oe=62F917DE',
    photos: [],
    followers: [],
    endAt: new Date(),
    beginAt: new Date(),
    distance: 10,
    price: 0,
    userId: ['Tree of Life Zig', 'La Clairi√®re'],
    place: 'La Clairi√®re',
    type: [],
    formatted_address: '1 Carr de Longchamp, 75016 Paris',
    place_id: '987ds89vfds987adc9',
    geocode: { lat: 48.864534, lng: 2.237357 },
  },
  {
    id: 9,

    title: 'La guinguette du jardin ~ Aksel ~ Open Air',
    desc: `Vendredi 2 Septembre, pour notre 20√®me rentr√©e, nous aurons le plaisir de recevoir Quantic aussi bien connu pour ses djs sets en solo qu‚Äô √† la t√™te des groupes Ondatropica, the Quantic Soul Orchestra ou encore Quantic & his Combo Barbaro pour un dj set de 3 heures. A ses c√¥t√©s, Theo Terev qui fait partie du collectif la Mamie's et Soulist.
  Une premi√®re date qui devrait parcourir un spectre musical √† 360¬∞, latin, soul, house, disco, afrobeat ou funk.`,
    coverUri:
      'https://scontent-mrs2-1.xx.fbcdn.net/v/t39.30808-6/296154048_1522938371459145_3590926811595893727_n.jpg?_nc_cat=109&ccb=1-7&_nc_sid=340051&_nc_ohc=3dOirSxn8QcAX8EsCK1&_nc_ht=scontent-mrs2-1.xx&oh=00_AT-Dbx_CtOfA_Uq68a-NU0oqFJ-jaWV5m2JaF92jcjCumw&oe=62F98415',
    photos: [],
    followers: [],
    endAt: new Date(),
    beginAt: new Date(),
    distance: 10,
    price: 0,
    userId: ['Jardin21'],
    place: 'Jardin21',
    type: [],
    formatted_address: '12/A Rue Ella Fitzgerald, 75019 Paris',
    place_id: '987ds89vfds987adc9',
    geocode: { lat: 48.896242, lng: 2.396058 },
  },
  {
    id: 10,
    title: `F*** Me I'm Stagiaire - Ecole de Commerce Exig√©e - Summer Edition`,
    desc: `Apr√®s une premi√®re √©dition de sa c√©l√®bre soir√©e F*** Me I'M Stagiaire rassemblant pr√®s de 2000 personnes, on revient avec une nouvelle date le 26 ao√ªt prochain ! üåÖüçìüèñÔ∏è
    Pour rappel, ECE est un concept de soir√©e qui a pour but de r√©unir l'ensemble des √©tudiants d'√©coles sup√©rieures de commerce (et leurs amis ext√©rieurs) en soir√©es √† Paris.
    C‚Äôest l‚Äôoccasion de retrouver ses potes de pr√©pa, en stage √† Paris comme vous, ou tout simplement vos potes d‚Äô√©coles de commerce. Vous pouvez √©galement venir avec vos amis ¬´ ext√© ¬ª qui sont les bienvenus. üß°
    Mais ECE, c'est aussi entre 1000 et 2000 personnes chaque ann√©e, depuis plus de 10 ans, pr√™ts √† enflammer les pistes de danse pour le meilleur et pour le pire (surtout le pire), une dizaine d'√©coles partenaires minimum, des litres d'alcool ing√©r√©s et une ambiance de folie ! üçª
    üìú AU PROGRAMME :
    ‚ñ∫ Bar √† shots
    ‚ñ∫ Bar √† cocktails
    ‚ñ∫ Douceurs sucr√©es offertes toute la soir√©e
    ‚ñ∫ Petit d√©j' offert en fin de soir√©e
    DES PRIX DE CONSO IMBATTABLES :
    ‚ñ∫ 5‚Ç¨ la conso / 10‚Ç¨ les 3 consos
    - Rhum Coca
    - Vodka Orange / Pomme
    - Gin Tonic
    - Rhum Orange
    - Whisky Coca
    ‚ñ∫ Cocktails : 7‚Ç¨
    - Jaggerbomb
    - Moscow Mule
    - Vodka Redbull
    ‚ñ∫ Bouteilles Hard : 100‚Ç¨
    ‚ñ∫ Shots : 3‚Ç¨
    ‚ñ∫ 5 shots : 10‚Ç¨
    ü§ù PARTENARIATS
    Pr√®s de 20 √©coles partenaires les ann√©es pr√©c√©dentes (HEC, TBS, EM Lyon, Kedge, ESCP, Neoma, Audencia, Skema, Edhec, GEM, ESSEC, etc.), combien cette ann√©e ?
    Si ton √©cole fait partie de ces partenaires, suis attentivement les jeux concours √† venir pour remporter √† boire. Seuls les √©tudiants des √©coles partenaires sont √©ligibles aux gains. Sinon, motive ton BDE √† nous contacter. üòä
    Si tu fais partie d'un BDE et souhaites profiter de nos offres de partenariat, contacte nous d√®s maintenant en ajoutant ce profil et une fois l'invitation accept√©e, tu peux nous envoyer un MP :
    ‚û°Ô∏è https://cutt.ly/vKUwtqU
    
    üîé INFOS PRATIQUES
    RDV d√®s 23h au Carr√© Montparnasse, 34 rue du D√©part.
    M√©tro : Montparnasse ‚Äì Bienven√ºe (4 - 6 - 12 - 13)
    Bus : Gare Montparnasse (28 - 58 - 82 - 88 - 89 - 91 - 92 - 94 - 96)
    Noctilien : Gare Montparnasse (N01 - N02 - N12 - N13 - N61 - N62 - N63 - N145)
    Station V√©lib la plus proche : 33 Bd Edgar Quinet
    
    üéüÔ∏è PR√âVENTES :
    https://cutt.ly/wKUwa3T
    üí¶ Fresh Ticket : 10‚Ç¨ (r√©serv√© aux 100 premiers, acc√®s √† la soir√©e uniquement)
    ü•• Coconut Ticket : 15‚Ç¨ (acc√®s √† la soir√©e uniquement)
    üî• Hot Ticket : 20‚Ç¨ (acc√®s √† la soir√©e + 1 consommation)
    Merci d'utiliser le mail de votre √©cole pour prendre votre place !
    ‚òé INFOLINE
    ‚ñ∫ Diego Delamare
    FB : https://cutt.ly/vKUwtqU
    Mail : diego@placeminute.com `,
    coverUri:
      'https://scontent-mrs2-1.xx.fbcdn.net/v/t39.30808-6/296309437_2619937258150068_3287115858651136422_n.jpg?stp=dst-jpg_p960x960&_nc_cat=103&ccb=1-7&_nc_sid=340051&_nc_ohc=w2iV0kbQm5MAX_yyOhA&_nc_ht=scontent-mrs2-1.xx&oh=00_AT_W-jm7CgYm_NXmQQTkXTYp2hXcNtMNlYHlBuKZUboJAQ&oe=62F879BF',
    photos: [],
    followers: [],
    endAt: new Date(),
    beginAt: new Date(),
    distance: 10,
    price: 0,
    userId: ['Ecole de Commerce Exig√©e', 'Leana Bellier'],
    place: 'Carr√© Montparnasse',
    type: [],
    formatted_address: '12/A Rue Ella Fitzgerald, 75019 Paris',
    place_id: '987ds89vfds987adc9',
    geocode: { lat: 48.844128, lng: 2.323977 },
  },
];

export const EventContext = createContext({} as EventProvider);
export const EventProvider: FC = ({ children }) => {
  const progress = useSharedValue(0);

  const [events, setEvents] = useState<IEvent[]>(EventMoked);

  const [formValues, setFormValues] = useState<IEvent>({} as IEvent);

  const handleForm = (key: keyof IEvent, value: unknown) => {
    setFormValues({ ...formValues, [key]: value });
  };
  const [isOpenCreateEventModal, setIsOpenCreateEventModal] =
    useState<boolean>(false);
  const [isOpenCreatePlace, setIsOpenCreatePlace] = useState<boolean>(false);
  // const { location } = useMapContext();

  // useEffect(() => {
  //   (async () => {
  //     if (location) {
  //       try {
  //         const eventsFromServer = await axios.get(
  //           'http://192.168.1.33:3000/event/near',
  //           {
  //             params: {
  //               distance: RADIUS_BASE_IN_METRE * 10000,
  //               long: location.longitude,
  //               lat: location.latitude,
  //             },
  //           },
  //         );

  //         if (eventsFromServer) {
  //           setEvents(eventsFromServer.data);
  //         }
  //       } catch (err) {
  //         console.log(err);
  //       }
  //     }
  //   })();
  // }, []);

  return (
    <EventContext.Provider
      value={{
        events,
        setEvents,
        isOpenCreateEventModal,
        setIsOpenCreateEventModal,
        formValues,
        handleForm,
        isOpenCreatePlace,
        setIsOpenCreatePlace,
        progress,
      }}
    >
      {children}
    </EventContext.Provider>
  );
};

export const useEventsContext = () => useContext(EventContext);
